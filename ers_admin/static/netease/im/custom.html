<!doctype html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<title>云信 Web Demo</title>
	<link rel="stylesheet" href="css/base.css" />
	<link rel="stylesheet" href="css/animate.css" />
	<link rel="stylesheet" href="css/jquery-ui.css" />
	<link rel="stylesheet" href="css/contextMenu/jquery.contextMenu.css" />
	<link rel="stylesheet" href="css/minAlert.css" />
	<link rel="stylesheet" href="css/main.css" />
	<link rel="stylesheet" href="css/uiKit.css" />
	<link rel="stylesheet" href="css/CEmojiEngine.css" />
	<link rel="stylesheet" href="css/rangeslider.css" />
	<link rel="icon" href="images/icon.ico" type="image/x-icon" />
</head>

<body>
	<div class="wrapper box-sizing">
		<div class="content">
			<div class="right-panel radius5px" id="rightPanel">
				<!-- 聊天面板 -->
				<div class="chat-box show-netcall-box" id="chatBox">
					<div class="netcall-box" id="netcallBox">
						<div class="netcall-mask hide">
							<div class="netcallTip"></div>
						</div>
						<div class="top hide">
							<span class="transferAudioAndVideo switchToAudio" id="switchToAudio">切换音频</span>
							<span class="transferAudioAndVideo switchToVideo" id="switchToVideo">切换视频</span>
							<span class="fullScreenIcon toggleFullScreenButton" id="toggleFullScreenButton" title="切换全屏">&nbsp;</span>
						</div>
						<!-- p2p呼叫界面 -->
						<div class="netcall-calling-box hide">
							<img alt="用户头像" class="avatar">
							<div class="nick"></div>
							<div class="tip">等待对方接听...</div>
							<div class="op">
								<button id="callingHangupButton" class="netcall-button red">挂断</button>
							</div>
						</div>
						<!-- p2p视频界面 -->
						<div class="netcall-show-video hide">
							<div class="netcall-video-left">
								<div class="netcall-video-remote bigView">
									<div class="message"></div>
									<span class="switchViewPositionButton"></span>
								</div>
							</div>
							<div class="netcall-video-right">
								<div class="netcall-video-local smallView">
									<div class="message"></div>
									<span class="switchViewPositionButton"></span>
								</div>
								<div class="operation">
									<div class="control">
										<div class="microphone control-item">
											<div class="slider hide">
												<div class="txt">10</div>
												<input class="microSliderInput" id="microSliderInput1" type="range" min="0" max="10" step="1" value="10" data-orientation="vertical">
											</div>
											<span class="icon-micro"></span>
										</div>
										<div class="volume control-item">
											<div class="slider hide">
												<div class="txt">10</div>
												<input class="volumeSliderInput" id="volumeSliderInput1" type="range" min="0" max="10" step="1" value="10" data-orientation="vertical">
											</div>
											<span class="icon-volume"></span>
										</div>
										<div class="camera control-item">
											<span class="icon-camera"></span>
										</div>
									</div>
									<div class="op">
										<button class="hangupButton netcall-button red">挂断</button>
									</div>
									<div class="tip">00 : 00</div>
								</div>
							</div>
						</div>
						<!-- p2p音频界面 -->
						<div class="netcall-show-audio hide">
							<img alt="用户头像" class="avatar">
							<div class="nick">test</div>
							<div class="tip">00 : 00</div>
							<div class="control">
								<div class="microphone control-item ">
									<div class="slider hide">
										<div class="txt">10</div>
										<input class="microSliderInput" id="microSliderInput" type="range" min="0" max="10" step="1" value="10" data-orientation="vertical">
									</div>
									<span class="icon-micro"></span>
								</div>
								<div class="volume control-item">
									<div class="slider hide">
										<div class="txt">10</div>
										<input class="volumeSliderInput" id="volumeSliderInput" type="range" min="0" max="10" step="1" value="10" data-orientation="vertical">
									</div>
									<span class="icon-volume"></span>
								</div>
							</div>
							<div class="op">
								<button class="hangupButton netcall-button red">挂断</button>
							</div>

						</div>
						<!-- 多人音视频互动界面 -->
						<div class="netcall-meeting-box hide" id="netcallMeetingBox"></div>
						<!-- 被叫界面 -->
						<div class="netcall-becalling-box hide">
							<img alt="用户头像" class="avatar">
							<div class="nick"></div>
							<p id="becallingText" class="tip"></p>
							<div class="op">
								<div class="normal">
									<div class="checking-tip">检查插件中...<span class="netcall-icon-checking"></span></div>
									<button class="netcall-button blue beCallingAcceptButton" id="beCallingAcceptButton">
                                        <span class="txt">接听</span>
                                        <span class="netcall-icon-checking"></span>
                                    </button>
									<button class="netcall-button red beCallingRejectButton" id="beCallingRejectButton">
                                        拒绝
                                    </button>
								</div>
								<div class="exception">
									<button class="netcall-button blue" id="downloadAgentButton">下载音视频插件</button><br/>
									<button class="netcall-button red beCallingRejectButton">拒绝</button>
									<div class="exception-tip">拒绝调用插件申请会导致无法唤起插件,需重启浏览器</div>
								</div>

							</div>
						</div>
						<div class="dialogs hide">
						</div>
					</div>
					<div class="chat-content box-sizing" id="chatContent">
						<!-- 聊天记录 -->
					</div>
					<div class="chat-editor box-sizing" id="chatEditor" data-disabled="1">
						<div id="emojiTag" class="m-emojiTag"></div>
						<a class="chat-btn u-emoji" id="showEmoji"></a>
						<span class="chat-btn msg-type" id="chooseFileBtn">
							<a class="icon icon-file" data-type="file"></a>
						</span>
						<a class="chat-btn u-netcall-audio-link" id="showNetcallAudioLink">&nbsp;</a>
						<a class="chat-btn u-netcall-video-link" id="showNetcallVideoLink">&nbsp;</a>
						<textarea id="messageText" class="chat-btn msg-input box-sizing radius5px p2p" rows="1" autofocus="autofocus" maxlength="500"></textarea>
						<a class="btn-send radius5px" id="sendBtn">发送</a>
						<form action="#" id="uploadForm">
							<input multiple="multiple" type="file" name="file" id="uploadFile" class="hide" />
						</form>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div id="mask" class="mask hide"></div>

	<!-- js-->

	<script src="../3rd/NIM_Web_SDK_v4.1.0.js"></script>
	<script src="../3rd/NIM_Web_Netcall_v4.1.0.js"></script>
	<script src="../3rd/NIM_Web_WebRTC_v4.1.0.js"></script>
	<script src="../3rd/jquery-1.11.3.min.js"></script>
	<!--<script src="../3rd/zepto.min.js"></script>-->
	<script>
		// FastClick.attach(document.body);
		window.onerror = function (errorMessage, source, lineno, colno, error) {
			var info = "错误信息：" + errorMessage + "\n" +
				"出错文件：" + source + "\n " +
				"出错行号：" + lineno + "\n" +
				"出错列号：" + colno + "\n" +
				"错误详情：" + error + "\n";

			// alert(JSON.stringify(ERROR));
			// ajax.postp(monitorUrl, ERROR, null, function(e){
			//     alert(e.stack);
			// });
			console.error(JSON.stringify(info));
			// ajax.post('/data/updateLog', ERROR);
			// alert(JSON.stringify(info))
			// minAlert.alert({
			// 	msg: JSON.stringify(info),
			// 	confirmBtnMsg: '好哒'
			// })
		}
		/** 测试用 */
		window.sdp = function (str) {
			if (!str) return
			var reg = /(v=|o=[^0-9]|s=-|t=0|a=|b=|c=I|m=|t=0)\w{0,1}/gi
			// var res = str.match(reg)
			var res = str.replace(reg, function (item) {
				return '<br>\r\n' + item
				// console.log(item)
			})
			// console.log(res)
			return res
		}
	</script>

	<!-- <script src="../3rd/platform.js"></script> -->
	<script src="../3rd/rtcSupport.js"></script>
	<script src="js/3rd/jquery-ui.min.js"></script>
	<script src="../3rd/rangeslider.min.js"></script>
	<!-- 右键菜单-->
	<script src="js/3rd/contextMenu/jquery.ui.position.js"></script>
	<script src="js/3rd/contextMenu/jquery.contextMenu.js"></script>

	<script src="js/config.js"></script>
	<script src="js/emoji.js"></script>
	<script src="js/util.js?v=2"></script>
	<script src="js/cache.js?v=2"></script>
	<script src="js/link.js"></script>
	<script src="js/ui.js?v=2"></script>
	<script src="js/widget/uiKit.js?v=2"></script>
	<script src="js/widget/minAlert.js"></script>
	<script src="js/module/base.js"></script>
	<script src="js/module/message.js"></script>
	<script src="js/module/sysMsg.js"></script>
	<script src="js/module/personCard.js"></script>
	<script src="js/module/session.js"></script>
	<script src="js/module/friend.js"></script>

	<script src="js/module/team.js"></script>
	<script src="js/module/dialog_team.js"></script>
	<script src="js/module/cloudMsg.js"></script>
	<script src="js/module/notification.js"></script>
	<script src="js/module/netcall.js"></script>
	<script src="js/module/netcall_meeting.js"></script>
	<script src="js/module/netcall_ui.js"></script>
	<script src="js/module/dialog_call_method.js"></script>
	<script src="js/main.js?v=2"></script>
</body>

</html>html>